substitutions:
  # this one is meant to be overridden on the command line
  name: default
  # these can be left alone unless they really need to be changed
  dname: ${name}-ppl
  uname: ${name}_ppl

esphome:
  name: $dname

esp32:
  board: adafruit_feather_esp32s3
  framework:
    type: arduino

# Enable logging
logger:

ota:
  password: ''

time:
  - platform: sntp
    id: the_time

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_ssid_password

api:

web_server:
  port: 80

# the ESP32 board used has i2c on non-standard pins
i2c:
  sda: 3
  scl: 4

# setup time of flight people counter hardware
external_components:
  - source: github://Lyr3x/Roode@master
    refresh: always
vl53l1x:
roode:

# wake up if PIR sensor active
# stay awake at least 2s and as long as motion is detected

# setup sensors
number:
  - platform: roode
    people_counter:
      id: people
      name: people

sensor:
  # this is all the time of flight stuff
  - platform: roode
    id: ${uname}
    distance_entry:
      name: entry
      filters:
        - delta: 100.0
    distance_exit:
      name: exit
      filters:
        - delta: 100.0
    min_threshold_entry:
      name: min entry
    max_threshold_entry:
      name: max entry
    min_threshold_exit:
      name: min exit
    max_threshold_exit:
      name: max exit
    roi_height_entry:
      name: height entry
    roi_height_exit:
      name: height exit
    roi_width_entry:
      name: width entry
    roi_width_exit:
      name: width exit

text_sensor:
  - platform: roode
    version:
      name: roode version
    entry_exit_event:
      name: last direction
