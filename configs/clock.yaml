substitutions:
  name: default
  dname: ${name}-clk
  uname: ${name}_clk

esphome:
  platformio_options:
    board_build.flash_size: 8MB
    board_upload.maximum_size: 8388608
  name: ${dname}

esp32:
  board: adafruit_feather_esp32s3
  flash_size: 8MB
  framework:
    type: esp-idf

external_components:
  - source: github://pr#8520
    components: [ ht16k33_char ]

logger:

ota:
  platform: esphome

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_ssid_password

api:

# the ESP32 board used has i2c on non-standard pins
i2c:
  sda: 3
  scl: 4

time:
  - platform: homeassistant
    id: homeassistant_time
    update_interval: 1s

# setup display dimmer
number:
  - platform: template
    name: brightness
    id: brightness
    min_value: 0
    max_value: 15
    step: 1
    optimistic: true
    restore_value: true
    initial_value: 8
    set_action:
      - lambda: |-
          id(sevenseg).update();

display:
  - platform: ht16k33_char
    device: ADAFRUIT_7_SEG_.56IN
    id: sevenseg
    brightness: 8
    lambda: |-
      it.brightness(id(brightness).state);
      it.clock_display(0,true,false,true,id(homeassistant_time).now());

button:
  - platform: restart
    name: restart
  - platform: safe_mode
    name: restart safe
    icon: mdi:restart-alert

binary_sensor:
  - platform: status
    name: status

sensor:
  - platform: wifi_signal
    name:  wifi signal
    update_interval: 60s

